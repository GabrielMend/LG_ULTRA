import json


def verifica_tier1(dados):
    tier1_found = False
    with open(r'C:\Users\gabri\Documents\GitHub\LG_ULTRA\ultralg\core\tdd\tier_one.json', 'r', encoding='utf-8') as f:
        tier1_asns = json.load(f)

    tier1_present = set()  # para guardar os ASNs que apareceram

    for entry in dados:
        as_path_list = entry['as_path'].split()
        for asn in as_path_list:
            if asn in tier1_asns:
                tier1_found = True
                tier1_present.add(asn)

    if tier1_found:
        return f"TIER LOCALIZADOS {', '.join(sorted(tier1_present))}"
    else:
        return "ANUNCIO/ESPECIFICIDADE PROVAVELMENTE SOMENTE PARA IX/PNI - SEM TIER 1 NOS AS PATH"
    


dados = [{'location': 'Amsterdam, Netherlands', 'as_path': '34854 1299 37468 28260 28260', 'prefix': '187.16.240.0/20'}, {'location': 'Amsterdam, Netherlands', 'as_path': '59919 9002 13786 28260', 'prefix': '187.16.240.0/20'}, {'location': 'Amsterdam, Netherlands', 'as_path': '202365 50673 33891 28260', 'prefix': '187.16.240.0/20'}, {'location': 'Amsterdam, Netherlands', 'as_path': '7018 3356 13786 28260', 'prefix': '187.16.240.0/20'}, {'location': 'Amsterdam, Netherlands', 'as_path': '50304 1031 28260', 'prefix': '187.16.240.0/20'}, {'location': 'Amsterdam, Netherlands', 'as_path': '132825 2914 13786 28260', 'prefix': '187.16.240.0/20'}, {'location': 'Amsterdam, Netherlands', 'as_path': '206499 34549 1031 28260', 'prefix': '187.16.240.0/20'}, {'location': 'Amsterdam, Netherlands', 'as_path': '22652 22356 13786 28260', 'prefix': '187.16.240.0/20'}, {'location': 'Amsterdam, Netherlands', 'as_path': '55720 2914 13786 28260', 'prefix': '187.16.240.0/20'}, {'location': 'Amsterdam, Netherlands', 'as_path': '34927 56655 1031 28260', 'prefix': '187.16.240.0/20'}, {'location': 'Amsterdam, Netherlands', 'as_path': '44393 58057 6939 28260', 'prefix': '187.16.240.0/20'}, {'location': 'Amsterdam, Netherlands', 'as_path': '20205 6939 28260', 'prefix': '187.16.240.0/20'}, {'location': 'Amsterdam, Netherlands', 'as_path': '34549 1031 28260', 'prefix': '187.16.240.0/20'}, {'location': 'Amsterdam, Netherlands', 'as_path': '216285 8280 6762 26615 28260', 'prefix': '187.16.240.0/20'}, {'location': 'Amsterdam, Netherlands', 'as_path': '213241 1031 28260', 'prefix': '187.16.240.0/20'}, {'location': 'Amsterdam, Netherlands', 'as_path': '204092 34019 3303 28260', 'prefix': '187.16.240.0/20'}, {'location': 'Amsterdam, Netherlands', 'as_path': '49673 3216 1031 28260', 'prefix': '187.16.240.0/20'}, {'location': 'Amsterdam, Netherlands', 'as_path': '328840 327727 174 13786 28260', 'prefix': '187.16.240.0/20'}, {'location': 'Amsterdam, Netherlands', 'as_path': '852 2914 13786 28260', 'prefix': '187.16.240.0/20'}, {'location': 'Amsterdam, Netherlands', 'as_path': '13830 971 174 13786 28260', 'prefix': '187.16.240.0/20'}, {'location': 'Amsterdam, Netherlands', 'as_path': '37721 1031 28260', 'prefix': '187.16.240.0/20'}, {'location': 'Amsterdam, Netherlands', 'as_path': '15562 2914 13786 28260', 'prefix': '187.16.240.0/20'}, {'location': 'Amsterdam, Netherlands', 'as_path': '50300 1031 28260', 'prefix': '187.16.240.0/20'}, {'location': 'Amsterdam, Netherlands', 'as_path': '50628 35280 1031 28260', 'prefix': '187.16.240.0/20'}, {'location': 'Amsterdam, Netherlands', 'as_path': '61218 6939 28260', 'prefix': '187.16.240.0/20'}, {'location': 'Amsterdam, Netherlands', 'as_path': '29504 15935 174 13786 28260', 'prefix': '187.16.240.0/20'}, {'location': 'Amsterdam, Netherlands', 'as_path': '49432 48362 1031 28260', 'prefix': '187.16.240.0/20'}, {'location': 'Amsterdam, Netherlands', 'as_path': '3333 6762 26615 28260', 'prefix': '187.16.240.0/20'}, {'location': 'Amsterdam, Netherlands', 'as_path': '58057 174 13786 28260', 'prefix': '187.16.240.0/20'}, {'location': 'Amsterdam, Netherlands', 'as_path': '34927 52025 174 13786 28260', 'prefix': '187.16.240.0/20'}, {'location': 'Amsterdam, Netherlands', 'as_path': '57381 50304 1031 28260', 'prefix': '187.16.240.0/20'}, {'location': 'Amsterdam, Netherlands', 'as_path': '57821 12586 3257 37468 28260 28260', 'prefix': '187.16.240.0/20'}, {'location': 'Amsterdam, Netherlands', 'as_path': '34800 58057 50673 33891 28260', 'prefix': '187.16.240.0/20'}, {'location': 'Amsterdam, Netherlands', 'as_path': '45049 6696 2914 13786 28260', 'prefix': '187.16.240.0/20'}, {'location': 'Amsterdam, Netherlands', 'as_path': '58057 34549 1031 28260', 'prefix': '187.16.240.0/20'}, {'location': 'Amsterdam, Netherlands', 'as_path': '48185 3356 13786 28260', 'prefix': '187.16.240.0/20'}, {'location': 'Amsterdam, Netherlands', 'as_path': '1403 174 13786 28260', 'prefix': '187.16.240.0/20'}, {'location': 'Amsterdam, Netherlands', 'as_path': '17639 1031 28260', 'prefix': '187.16.240.0/20'}, {'location': 'Amsterdam, Netherlands', 'as_path': '38001 9002 13786 28260', 'prefix': '187.16.240.0/20'}, {'location': 'Amsterdam, Netherlands', 'as_path': '4608 4826 1031 28260', 'prefix': '187.16.240.0/20'}, {'location': 'Amsterdam, Netherlands', 'as_path': '24482 28260', 'prefix': '187.16.240.0/20'}, {'location': 'Amsterdam, Netherlands', 'as_path': '3549 3356 13786 28260', 'prefix': '187.16.240.0/20'}, {'location': 'Amsterdam, Netherlands', 'as_path': '14907 3356 13786 28260', 'prefix': '187.16.240.0/20'}, {'location': 'Amsterdam, Netherlands', 'as_path': '20514 1299 37468 28260 28260', 'prefix': '187.16.240.0/20'}, {'location': 'London, United Kingdom', 'as_path': '15692 2914 13786 28260', 'prefix': '187.16.240.0/20'}, {'location': 'London, United Kingdom', 'as_path': '8218 6461 1031 28260', 'prefix': '187.16.240.0/20'}, {'location': 'London, United Kingdom', 'as_path': '6908 2914 13786 28260', 'prefix': '187.16.240.0/20'}, {'location': 'London, United Kingdom', 'as_path': '36924 35280 1031 28260', 'prefix': '187.16.240.0/20'}, {'location': 'London, United Kingdom', 'as_path': '48070 1031 28260', 'prefix': '187.16.240.0/20'}, {'location': 'London, United Kingdom', 'as_path': '6894 174 13786 28260', 'prefix': '187.16.240.0/20'}, {'location': 'London, United Kingdom', 'as_path': '31742 1031 28260', 'prefix': '187.16.240.0/20'}, {'location': 'London, United Kingdom', 'as_path': '35266 1031 28260', 'prefix': '187.16.240.0/20'}, {'location': 'London, United Kingdom', 'as_path': '917 60068 13786 28260', 'prefix': '187.16.240.0/20'}, {'location': 'London, United Kingdom', 'as_path': '286 3257 37468 28260 28260', 'prefix': '187.16.240.0/20'}, {'location': 'London, United Kingdom', 'as_path': '6461 1031 28260', 'prefix': '187.16.240.0/20'}, {'location': 'London, United Kingdom', 'as_path': '1828 28260', 'prefix': '187.16.240.0/20'}, {'location': 'London, United Kingdom', 'as_path': '6830 174 13786 28260', 'prefix': '187.16.240.0/20'}, {'location': 'London, United Kingdom', 'as_path': '28792 1031 28260', 'prefix': '187.16.240.0/20'}, {'location': 'London, United Kingdom', 'as_path': '3320 2914 13786 28260', 'prefix': '187.16.240.0/20'}, {'location': 'London, United Kingdom', 'as_path': '2914 13786 28260', 'prefix': '187.16.240.0/20'}, {'location': 'London, United Kingdom', 'as_path': '3491 3356 13786 28260', 'prefix': '187.16.240.0/20'}, {'location': 'London, United Kingdom', 'as_path': '13030 1299 37468 28260 28260', 'prefix': '187.16.240.0/20'}, {'location': 'London, United Kingdom', 'as_path': '9002 13786 28260', 'prefix': '187.16.240.0/20'}, {'location': 'London, United Kingdom', 'as_path': '6908 2914 13786 28260', 'prefix': '187.16.240.0/20'}, {'location': 'London, United Kingdom', 'as_path': '62167 3356 13786 28260', 'prefix': '187.16.240.0/20'}, {'location': 'London, United Kingdom', 'as_path': '6424 2914 13786 28260', 'prefix': '187.16.240.0/20'}, {'location': 'London, United Kingdom', 'as_path': '25160 1031 28260', 'prefix': '187.16.240.0/20'}, {'location': 'London, United Kingdom', 'as_path': '37721 1031 28260', 'prefix': '187.16.240.0/20'}, {'location': 'London, United Kingdom', 'as_path': '24482 1031 28260', 'prefix': '187.16.240.0/20'}, {'location': 'London, United Kingdom', 'as_path': '39122 1031 28260', 'prefix': '187.16.240.0/20'}, {'location': 'London, United Kingdom', 'as_path': '42473 1031 28260', 'prefix': '187.16.240.0/20'}, {'location': 'London, United Kingdom', 'as_path': '12969 1031 28260', 'prefix': '187.16.240.0/20'}, {'location': 'London, United Kingdom', 'as_path': '34927 1031 28260', 'prefix': '187.16.240.0/20'}, {'location': 'London, United Kingdom', 'as_path': '14630 1031 28260', 'prefix': '187.16.240.0/20'}, {'location': 'London, United Kingdom', 'as_path': '3214 1031 28260', 'prefix': '187.16.240.0/20'}, {'location': 'London, United Kingdom', 'as_path': '1299 37468 28260 28260', 'prefix': '187.16.240.0/20'}, {'location': 'London, United Kingdom', 'as_path': '6233 1031 28260', 'prefix': '187.16.240.0/20'}, {'location': 'London, United Kingdom', 'as_path': '3170 1031 28260', 'prefix': '187.16.240.0/20'}, {'location': 'London, United Kingdom', 'as_path': '207841 1031 28260', 'prefix': '187.16.240.0/20'}, {'location': 'London, United Kingdom', 'as_path': '271253 1031 28260', 'prefix': '187.16.240.0/20'}, {'location': 'Montevideo, Uruguay', 'as_path': '46997 38008 3491 2914 13786 28260', 'prefix': '187.16.240.0/20'}, {'location': 'Montevideo, Uruguay', 'as_path': '265721 64126 1031 28260', 'prefix': '187.16.240.0/20'}, {'location': 'Montevideo, Uruguay', 'as_path': '53427 28260', 'prefix': '187.16.240.0/20'}, {'location': 'Montevideo, Uruguay', 'as_path': '61573 28260', 'prefix': '187.16.240.0/20'}, {'location': 'Montevideo, Uruguay', 'as_path': '263702 174 13786 28260', 'prefix': '187.16.240.0/20'}, {'location': 'Montevideo, Uruguay', 'as_path': '53046 1031 28260', 'prefix': '187.16.240.0/20'}, {'location': 'Montevideo, Uruguay', 'as_path': '49544 12956 37468 28260 28260', 'prefix': '187.16.240.0/20'}, {'location': 'Montevideo, Uruguay', 'as_path': '49544 12956 37468 28260 28260', 'prefix': '187.16.240.0/20'}, {'location': 'Montevideo, Uruguay', 'as_path': '14840 28260', 'prefix': '187.16.240.0/20'}, {'location': 'Montevideo, Uruguay', 'as_path': '14840 28260', 'prefix': '187.16.240.0/20'}, {'location': 'Montevideo, Uruguay', 'as_path': '264845 6057 28260', 'prefix': '187.16.240.0/20'}, {'location': 'Montevideo, Uruguay', 'as_path': '6057 28260', 'prefix': '187.16.240.0/20'}, {'location': 'Singapore, Singapore', 'as_path': '18106 1031 28260', 'prefix': '187.16.240.0/20'}, {'location': 'Singapore, Singapore', 'as_path': '3491 2914 13786 28260', 'prefix': '187.16.240.0/20'}, {'location': 'Singapore, Singapore', 'as_path': '14907 6453 52468 28260 28260', 'prefix': '187.16.240.0/20'}]
aa = verifica_tier1(dados=dados)
print(aa)
